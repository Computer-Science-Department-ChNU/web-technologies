<!DOCTYPE html>
<html lang="uk">
<head>
    <title>Тема 16. Події (Events)</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <link rel="stylesheet" href="../../../core/styles/styles.css">
    <style>
        .shower {
            --slide-ratio: calc(16 / 9);
        }
    </style>
</head>
<body class="shower list">

<header class="caption">
    <h1>Тема 16. Події (Events)</h1>
</header>

<section class="slide">
    <h2>Тема 16. Події (Events)</h2>
    <ol style="font-size: 19px;">
        <li>Вступ до подій</li>
        <li>Основні події</li>
        <li>Встановлення обробників події</li>
        <li>Ключове слово this в обробнику події</li>
        <li>Об'єкт події</li>
        <li>Події DOMContentLoaded та load</li>
        <li>Події миші</li>
        <li>Події клавіатури</li>
        <li>Фази проходу події</li>
        <li>Реєстрація обробника події на різних фазах</li>
        <li>Скасування поширення події та скасування дії за умовчанням</li>
    </ol>
</section>

<section class="slide">
    <h2>Подія</h2>
    <div class="columns two">
        <div>
            <p><b>Подія</b> – це сигнал, який повідомляє про настання певного стану деякого об'єкта.</p>
            <b>Наприклад:</b>
            <ol>
                <li>кнопка натиснута</li>
                <li>курсор увійшов до області елемента</li>
                <li>на клавіатурі натиснута клавіша</li>
            </ol>
            <p><b>Обробник події</b> – функція, яка запускається у разі виникнення події.</p>
        </div>
        <img style="margin-top: 45%" src="images/1.png" alt="" width="100%">
    </div>
</section>

<section class="slide">
    <h2>Основні події</h2>
    <div class="columns two">
        <ul>
            <li><b>click</b>
                натискання лівої клавіші миші
            </li>
            <li><b>contextmenu</b>
                натискання правої клавіші миші
            </li>
            <li><b>keydown</b>
                клавіша на клавіатурі затиснута
            </li>
            <li><b>keyup</b>
                клавішу на клавіатурі відпущено
            </li>
            <li><b>submit</b>
                користувач надіслав форму (натиснув
                кнопку submit для form)
            </li>
        </ul>
        <ul>
            <li><b>mouseout</b>
                курсор вийшов за межі елемента
            </li>
            <li><b>mouseover</b>
                курсор увійшов у область елемента
            </li>
            <li><b>mousedown</b>
                затиснута клавіша миші
            </li>
            <li><b>mouseup</b>
                відпущена клавіша миші
            </li>
            <li><b>mousemove</b>
                курсор переміщається елементом
            </li>
        </ul>
    </div>
    <a href="https://developer.mozilla.org/ru/docs/Web/Events" target="_blank">Перелік подій
        https://developer.mozilla.org/ru/docs/Web/Events</a>
</section>

<section class="slide">
    <h2>Встановлення обробників</h2>
    <img src="images/2.png" alt="" width="100%">
</section>

<section class="slide">
    <h2>Встановлення обробників</h2>
    <ul>
        <li>Обробник може бути встановлений за допомогою атрибута HTML розмітки. Це один із
            способів встановлення обробників, яких слід уникати, оскільки у такому випадку
            відбувається змішування логіки інтерфейсу (HTML) та бізнес-логіки (JavaScript). Слід завжди
            прагнути такої структури коду, щоб розмітка відокремлювалася від сценаріїв. Такий код
            легше супроводжувати та розширювати.
        </li>
        <li>Щоб встановити обробник події через JavaScript код, необхідно визначити функцію та
            додати її як значення для властивості з ім'ям події, яку необхідно обробити. Даний підхід має кілька
            недоліків, один з них – на одну подію одного елемента можна
            додати лише один обробник. При додаванні другого оброблювача, перший обробник
            видаляється.

        </li>
        <li>Найоптимальнішим способом встановлення обробника події є метод addEventListener</li>
    </ul>
</section>

<section class="slide">
    <h2>Встановлення обробників</h2>
    <b>addEventListener (event, handler, options)</b>
    <ul>
        <li>event – ім'я події, без приставки on (click, mousedown тощо)</li>
        <li>handler – функція, яка встановлюється як обробник.</li>
        <li>options – додаткові параметри</li>
    </ul>
    <p>У такий спосіб можна додати кілька обробників на одну подію того самого елемента
        сторінки.</p>
    <p>Щоб видалити обробник, який був встановлений через addEventListener, потрібно
        використовувати метод removeEventListener</p>
</section>

<section class="slide">
    <h2>Встановлення обробників</h2>
    <p>
        Метод removeEventListener у JavaScript використовується для видалення обробника подій, який був раніше доданий
        за допомогою addEventListener. Це важливо з кількох причин:
    </p>
    <ul style="font-size: 16px;">
        <li>Якщо обробник події залишається привʼязаним до елемента, який вже не використовується або видалений з DOM,
            це може призвести до витоку памʼяті:
            <ul>
                <li>Оскільки браузер не може "прибрати" цей елемент зі своєї памʼяті, поки існує посилання через
                    обробник;
                </li>
                <li>Особливо актуально для SPA (single-page applications), де сторінка не перезавантажується, і
                    "сміття" накопичується
                </li>
            </ul>
        </li>
        <li>Уникнення повторного спрацювання одного й того ж обробника. Якщо ви декілька разів викликаєте
            addEventListener, не видаляючи старі обробники, то один і той самий обробник може спрацьовувати кілька разів
            — це може викликати баги або неочікувану поведінку.
        </li>
    </ul>
</section>

<section class="slide">
    <h2>Встановлення обробників</h2>
    <b>
        Поради по роботі з removeEventListener
    </b>
    <ul style="font-size: 18px;">
        <li>Якщо при додаванні обробника події було використано додаткові опції, то при видаленні обробника необхідно
            вказати ці ж опції, щоб вказати, який саме обробник потрібно видалити.
        </li>
        <li>Використання removeEventListener() є важливим для оптимізації продуктивності вебзастосунків. Видалення
            непотрібних обробників подій допомагає уникнути витоків пам'яті, особливо в односторінкових додатках, де
            елементи DOM можуть динамічно додаватися та видалятися. Тому регулярно переглядайте свій код на предмет
            неактивних слухачів подій та видаляйте їх.
        </li>
        <li>Коли ви використовуєте removeEventListener() для видалення обробника події з елемента, переконайтеся, що цей
            елемент все ще існує в DOM. Якщо елемент було видалено, спроби видалити обробник події з нього будуть
            марними. Також, якщо ви працюєте з динамічно генерованими елементами, забезпечте наявність механізму для
            відстеження та видалення обробників подій перед видаленням цих елементів з DOM.
        </li>
    </ul>
</section>

<section class="slide">
    <h2>Ключове слово this в обробнику події</h2>
    <p>
        Якщо в обробнику використовувати ключове слово this, можна отримати доступ до
        об'єкта, який ініціював подію.
    </p>
    <p>Наприклад, якщо в обробнику кнопки на подію click
        використовувати this, можна отримати доступ до самої кнопки, по якій виконали клік, а
        також отримати значення властивостей цієї кнопки.</p>
    <p> Це зручно використовувати тоді, коли
        той самий обробник використовується для різних елементів на сторінці.</p>
</section>

<section class="slide">
    <h2>Підсумки</h2>
    <p>
        <b>Подія</b> – основний спосіб реагувати на дії користувача та виконувати код. Для обробки події потрібно
        встановити обробник події у вигляді JavaScript функції.
    </p>
    <b>Обробник можна встановити через:</b>
    <ul>
        <li>атрибут on+назва_події в розмітці</li>
        <li>властивості on+ім'я_події у JavaScript коді</li>
        <li>метод addEventListener</li>
    </ul>
    <p>Метод addEventListener дозволяє встановити кілька обробників на одну подію та підтримує
        маршрутизацію подій.</p>
    <p style="color: #cc0000">Приклади в директорії js/16-events/examples/events-1</p>
</section>

<section class="slide">
    <h2>Виклик функцій</h2>
    <div class="columns two">

    </div>
</section>

<section class="slide">
    <h2>Локальні змінні/Зовнішні змінні</h2>
    <ul>
        <li>Змінна, яка оголошена в функції доступна лише в тілі цієї функції.</li>
        <li>Функція може використовувати зовнішні змінні.</li>
        <li>Функція має повний доступ до зовнішньої змінної. Вона теж може її змінювати.</li>
        <li>Зовнішня змінна використовується тоді, коли немає локальної.</li>
        <li>Якщо всередині функції є змінна з таким самим ім’ям, то вона перекриває зовнішню.</li>
    </ul>
</section>

<section class="slide">
    <h2>Значення, що повертається</h2>
    <p>Функція може повертати значення. Виклик функції можна присвоїти змінній.</p>
    <pre>
        <code>значення ← getMessage();</code>
    </pre>
    <p>Для визначення значення, що повертається, використовується ключове слово return в тілі функції.</p>
    <pre>
        <code>function getMessage() {</code>
        <code>  return 'Some awesome text message!';</code>
        <code>}</code>
        <code> </code>
        <code>let value = getMessage();</code>
    </pre>
</section>

<section class="slide">
    <h2>Найменування функцій</h2>
    <ul>
        <li>Функція - це дія, тому для імені краще обирати дієслово.</li>
        <li>Одна функція має виконувати одну дію. Функція повинна робити саме те, що написано в її імені, не більше.
        </li>
        <li>Добре ім’я функції часто змінює коментар у коді.</li>
    </ul>
    <div class="columns two">
        <ul>
            <li>showReport()</li>
            <li>getSegmentLength()</li>
            <li>createButton()</li>
            <li>deleteDuplicates()</li>
            <li>checkPermission()</li>
        </ul>
        <ul>
            <li>"get…" – повертають значення,</li>
            <li>"calc…" – щось обчислюють,</li>
            <li>"create…" – щось створюють,</li>
            <li>"check…" – щось перевіряють і повертають булеве значення.</li>
        </ul>
    </div>
</section>

<section class="slide">
    <h2>Приклади</h2>
    <img src="images/4.jpg" alt="" width="600"/>
</section>

<section class="slide">
    <h2>Контрольні питання</h2>
    <ol>
        <li>Що така подія?</li>
        <li>Назвіть події, пов'язані з клавіатурою.</li>
        <li>Назвіть події, пов'язані з рухом курсора.</li>
        <li>Як встановити обробник через розмітку?</li>
        <li>Які способи встановлення обробників через JavaScript код ви знаєте?</li>
        <li>У чому перевага використання addEventListener перед іншими варіантами?</li>
    </ol>
</section>

<section class="slide">
    <h2 class="shout">Дякую за увагу!</h2>
</section>

<div class="progress"></div>

<script src="../../../core/shower.js"></script>
</body>
</html>

